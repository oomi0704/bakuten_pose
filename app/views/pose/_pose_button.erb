<html>
  <head>
    <title>pose detection</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-core"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-converter"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-webgl"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/pose-detection"></script>
    <script src="/javascripts/pose_direction.js"></script>
    <meta charset="UTF-8">
    <style>
      #start-button {
        background-color: #ff5733; /* 鮮やかなオレンジ色 */
        color: white; /* テキストの色を白に */
        border: none; /* ボーダーをなくす */
        border-radius: 5px; /* 角を丸くする */
        font-size: 20px; /* フォントサイズをさらに大きく */
        padding: 15px 30px; /* パディングを増やしてボタンを大きく */
        cursor: pointer; /* カーソルをポインターに */
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* 影を追加 */
        transition: background-color 0.3s ease; /* 背景色の変化にトランジションを追加 */
        width: 200px; /* ボタンの幅を設定 */
        height: 60px; /* ボタンの高さを設定 */
      }

      #start-button:hover {
        background-color: #e74c3c; /* ホバー時の背景色を変更 */
      }
    </style>
  </head>
  
  <body>
  <%= image_tag @user.stand_image.url, id: 'img_stand', width: '500px', alt: 'Stand Image', crossorigin: 'anonymous' %>
    <canvas id="canvas_stand" ></canvas> 
    <button id="start-button">診断開始</button>
    <p style="font-size: 20px; color: gray;">※ブラウザを更新してから押してください</p>
    
    <div id="container">
    
      <% if @user.stand_image.present? %>
        <%= image_tag @user.stand_image.url, id: 'img_stand', width: '500px', alt: 'Stand Image', crossorigin: 'anonymous' %>
      <% else %>
        <%= image_tag 'stand.png', id: 'img_stand', width: '500px', alt: 'Stand Image', crossorigin: 'anonymous' %>
      <% end %>
      <canvas id="canvas_stand" ></canvas> 
      <%= render 'pose/pose_stand' %>
    </div>



     <div id="container">
      <% if @user.fly_image.present? %>
        <%= image_tag @user.fly_image.url, id: 'img_fly', width: '500px', alt: 'Fly Image', crossorigin: 'anonymous' %>
      <% else %>
        <%= image_tag 'fly.png', id: 'img_fly', width: '500px', alt: 'Fly Image', crossorigin: 'anonymous' %>
      <% end %>
      <canvas id="canvas_fly" ></canvas> 
      <%= render 'pose/pose_fly' %>
    </div>

    <div id="container">
      <% if @user.land_image.present? %>
        <%= image_tag @user.land_image.url, id: 'img_land', width: '500px', alt: 'Land Image', crossorigin: 'anonymous' %>
      <% else %>
        <%= image_tag 'land.png', id: 'img_land', width: '500px', alt: 'Land Image', crossorigin: 'anonymous' %>
      <% end %>
      <canvas id="canvas_land" ></canvas> 
      <%= render 'pose/pose_land' %>
    </div>

    <script src="/javascripts/pose_direction.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const startButton = document.getElementById('start-button');
        if (startButton) {
          startButton.addEventListener('click', function() {
            startPoseDetection(); // pose_direction.js内の関数を呼び出す
          });
        }
      });
    </script>

  </body>
</html>
